meta {
  name: CreateHighMatchJob
  type: http
  seq: 3
}

post {
  url: {{base_url}}/employer/jobs
  body: json
  auth: inherit
}

headers {
  Authorization: Bearer {{employer_access_token}}
}

body:json {
  {
    "title": "Backend Engineer (High Match)",
    "description": "Requires Node.js + English",
    "location": "Remote",
    "jobType": "FULL_TIME",
    "experienceLevel": "JUNIOR",
    "salary": 2500,
    "requiredSkills": [
      {
        "skillId": {{skill_id}},
        "required": true
      }
    ],
    "requiredLanguages": [
      {
        "languageId": {{language_id}},
        "minimumProficiency": "BASIC",
        "required": true
      }
    ]
  }
}

script:post-response {
  const jobId = res.body?.data?.id;
  if (jobId) {
    bru.setEnvVar("job_id_high", JSON.stringify(jobId));
  }
}

settings {
  encodeUrl: true
  timeout: 0
}
